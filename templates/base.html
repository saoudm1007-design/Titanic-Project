<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Titanic Survival Predictor Dashboard{% endblock %}</title>
    <link rel="icon" type="image/svg+xml" href="{{ url_for('static', filename='img/favicon.svg') }}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.2/font/bootstrap-icons.min.css" rel="stylesheet">
    <link href="{{ url_for('static', filename='css/style.css') }}" rel="stylesheet">
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark sticky-top">
        <div class="container">
            <a class="navbar-brand fw-bold" href="/">
                <i class="bi bi-tsunami"></i> <span data-i18n="brand">Titanic Survival Predictor Dashboard</span>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link {% if request.path == '/dashboard' %}active{% endif %}" href="/dashboard">
                            <i class="bi bi-speedometer2"></i> <span data-i18n="nav.dashboard">Dashboard</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link {% if request.path == '/explore' %}active{% endif %}" href="/explore">
                            <i class="bi bi-table"></i> <span data-i18n="nav.explore">Explore Data</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link {% if request.path == '/performance' %}active{% endif %}" href="/performance">
                            <i class="bi bi-graph-up"></i> <span data-i18n="nav.performance">Model Performance</span>
                        </a>
                    </li>
                </ul>
                <div class="nav-controls ms-3">
                    <button class="lang-btn" data-lang="en" onclick="switchLanguage('en')">EN</button>
                    <button class="lang-btn" data-lang="ar" onclick="switchLanguage('ar')">AR</button>
                    <button class="theme-btn" id="theme-toggle" onclick="toggleTheme()">
                        <i class="bi bi-moon-fill" id="theme-icon"></i>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Animated Ocean Background -->
    <div class="ocean-bg">
        <div class="wave wave-1"></div>
        <div class="wave wave-2"></div>
        <div class="wave wave-3"></div>
        <div class="ship-container">
            <svg class="ship-svg" viewBox="0 0 200 100" xmlns="http://www.w3.org/2000/svg">
                <!-- Hull -->
                <path d="M10 70 Q100 95 190 70 L175 55 L25 55 Z" fill="#5C3D2E"/>
                <!-- Deck -->
                <rect x="30" y="42" width="140" height="13" rx="2" fill="#8B6914"/>
                <!-- Upper deck -->
                <rect x="40" y="32" width="120" height="10" rx="2" fill="#D4A84B"/>
                <!-- Smokestacks -->
                <rect x="55" y="8" width="12" height="24" rx="2" fill="#C0392B"/>
                <rect x="80" y="12" width="12" height="20" rx="2" fill="#C0392B"/>
                <rect x="105" y="8" width="12" height="24" rx="2" fill="#C0392B"/>
                <rect x="130" y="12" width="12" height="20" rx="2" fill="#C0392B"/>
                <!-- Smokestack tops -->
                <rect x="53" y="5" width="16" height="5" rx="1" fill="#2C3E50"/>
                <rect x="78" y="9" width="16" height="5" rx="1" fill="#2C3E50"/>
                <rect x="103" y="5" width="16" height="5" rx="1" fill="#2C3E50"/>
                <rect x="128" y="9" width="16" height="5" rx="1" fill="#2C3E50"/>
                <!-- Smoke puffs -->
                <ellipse cx="61" cy="3" rx="8" ry="3" fill="#95A5A6" opacity="0.4"/>
                <ellipse cx="111" cy="3" rx="6" ry="3" fill="#95A5A6" opacity="0.3"/>
                <!-- Windows -->
                <rect x="35" y="46" width="4" height="4" rx="0.5" fill="#85C1E9"/>
                <rect x="47" y="46" width="4" height="4" rx="0.5" fill="#85C1E9"/>
                <rect x="59" y="46" width="4" height="4" rx="0.5" fill="#85C1E9"/>
                <rect x="71" y="46" width="4" height="4" rx="0.5" fill="#85C1E9"/>
                <rect x="83" y="46" width="4" height="4" rx="0.5" fill="#85C1E9"/>
                <rect x="95" y="46" width="4" height="4" rx="0.5" fill="#85C1E9"/>
                <rect x="107" y="46" width="4" height="4" rx="0.5" fill="#85C1E9"/>
                <rect x="119" y="46" width="4" height="4" rx="0.5" fill="#85C1E9"/>
                <rect x="131" y="46" width="4" height="4" rx="0.5" fill="#85C1E9"/>
                <rect x="143" y="46" width="4" height="4" rx="0.5" fill="#85C1E9"/>
                <rect x="155" y="46" width="4" height="4" rx="0.5" fill="#85C1E9"/>
            </svg>
        </div>
    </div>

    <main class="container py-4">
        {% block content %}{% endblock %}
    </main>

    <footer class="bg-dark text-light py-3 mt-5">
        <div class="container text-center">
            <small class="text-muted" data-i18n="footer.text">Titanic Survival Predictor Dashboard &mdash; Built with Flask, scikit-learn &amp; Chart.js</small>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <script src="{{ url_for('static', filename='js/i18n.js') }}"></script>
    <script>
        // Theme toggle
        function toggleTheme() {
            const html = document.documentElement;
            const current = html.getAttribute('data-bs-theme');
            const next = current === 'dark' ? 'light' : 'dark';
            html.setAttribute('data-bs-theme', next);
            localStorage.setItem('titanic-theme', next);
            updateThemeIcon(next);
        }

        function updateThemeIcon(theme) {
            const icon = document.getElementById('theme-icon');
            if (icon) {
                icon.className = theme === 'dark' ? 'bi bi-sun-fill' : 'bi bi-moon-fill';
            }
        }

        // Apply saved theme on load
        (function() {
            const saved = localStorage.getItem('titanic-theme') || 'light';
            document.documentElement.setAttribute('data-bs-theme', saved);
            updateThemeIcon(saved);
        })();
    </script>
    {% block scripts %}{% endblock %}
</body>
</html>
